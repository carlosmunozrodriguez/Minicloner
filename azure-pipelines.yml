jobs:
- job: Windows
  pool:
    vmImage: windows-2019
  steps:
  - task: UseDotNet@2
    displayName: Install dotnet SDK 2.2.203
    inputs:
      version: 2.2.203
  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: build
      arguments: --configuration Release
  - task: DotNetCoreCLI@2
    displayName: Test .NET Core 2.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp2.0
      nobuild: true
  - task: UseDotNet@2
    displayName: Install dotnet SDK 1.1.12
    inputs:
      version: 1.1.12
  - task: DotNetCoreCLI@1
    displayName: Test .NET Core 1.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp1.0 --no-build --verbosity diagnostic
- job: Linux
  pool:
    vmImage: ubuntu-16.04
  steps:
  - task: UseDotNet@2
    displayName: Install dotnet SDK 2.2.203
    inputs:
      version: 2.2.203
  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: build
      arguments: --configuration Release
  - task: DotNetCoreCLI@2
    displayName: Test .NET Core 2.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp2.0
      nobuild: true
  - task: UseDotNet@2
    displayName: Install dotnet SDK 1.1.12
    inputs:
      version: 1.1.12
  - task: DotNetCoreCLI@1
    displayName: Test .NET Core 1.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp1.0 --no-build
- job: macOS
  pool:
    vmImage: macOS-10.14
  steps:
  - task: UseDotNet@2
    displayName: Install dotnet SDK 2.2.203
    inputs:
      version: 2.2.203
  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: build
      arguments: --configuration Release
  - task: DotNetCoreCLI@2
    displayName: Test .NET Core 2.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp2.0
      nobuild: true
  - task: UseDotNet@2
    displayName: Install dotnet SDK 1.1.12
    inputs:
      version: 1.1.12
  - task: DotNetCoreCLI@1
    displayName: Test .NET Core 1.0
    inputs:
      command: test
      projects: Minicloner.Tests/Minicloner.Tests.csproj
      arguments: --configuration Release --framework netcoreapp1.0 --no-build